<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>Functional Testing Sds/Common/ValidationForm</title>
		<style type="text/css">
            @import "../../../../themes/bootstrap/css/bootstrap.css";
            @import "../../../../themes/bootstrap/css/bootstrap-responsive.css";
		</style>
        <script type="text/javascript" src="../../../testconfig.js"></script>
        <script type="text/javascript" src="../../../../../dojo/dojo.js"></script>
		<script type="text/javascript">
			require([
                'dojo/parser',
                'dojo/on',
                'dojo/dom',
                'dijit/registry',
                'Sds/Common/Form/ValidationForm',
                'Sds/Common/Form/TextBox',
                'Sds/Common/Form/ValidationTextBox',
                'dojo/domReady!'
            ],
            function(
                parser,
                on,
                dom,
                registry
            ){
                parser.parse().then(function(){
                    on(dom.byId('listInvalidButton'), 'click', function(){
                        var widgets = registry.byId('widgetListForm').get('invalidWidgets');
                        var ids = [];
                        for (var index in widgets){
                            ids.push(widgets[index].get('id'));
                        }
                        dom.byId('invalidWidgetsList').innerHTML = ids.toString();
                    });
                });
            })
		</script>
	</head>
	<body>
        <h1>Functional Testing Sds/Common/ValidationForm</h1>
        <br />

        <h3>Valid Form with form validator</h3>
        <form
            class="form-horizontal"
            data-dojo-type="Sds/Common/Form/ValidationForm"
            data-dojo-props="validator: {base: 'Sds/Test/Common/Form/Asset/MultiFieldValidator'}"
        >

            <input
                data-dojo-type="Sds/Common/Form/TextBox"
                type="text"
                value="Toby"
                data-dojo-props="
                    label: 'username',
                    name: 'username'"
            />
        </form>
        <br />

        <h3>Invalid Form with form validator</h3>
        <form
            class="form-horizontal"
            data-dojo-type="Sds/Common/Form/ValidationForm"
            data-dojo-props="validator: {base: 'Sds/Test/Common/Form/Asset/MultiFieldValidator'}"
        >

            <input
                data-dojo-type="Sds/Common/Form/TextBox"
                type="text"
                value="Not Toby"
                data-dojo-props="
                    label: 'username',
                    name: 'username'"
            />
        </form>

        <h3>Invalid Form with invalid textbox showing invalid widgets list</h3>
        <form
            id="widgetListForm"
            class="form-horizontal"
            data-dojo-type="Sds/Common/Form/ValidationForm"
        >

            <input
                id="username1"
                data-dojo-type="Sds/Common/Form/ValidationTextBox"
                type="text"
                value="Not Toby"
                data-dojo-props="
                    label: 'username1',
                    name: 'username1',
                    validator: {base: 'Sds/Common/Validator/LengthValidator', params: {max: 4, min: 2}}"
            />
            <input
                id="username2"
                data-dojo-type="Sds/Common/Form/ValidationTextBox"
                type="text"
                value="Toby"
                data-dojo-props="
                    label: 'username2',
                    name: 'username2',
                    validator: {base: 'Sds/Common/Validator/LengthValidator', params: {max: 4, min: 2}}"
            />
        </form>
        <button class="btn btn-primary btn-large" id="listInvalidButton">List invalid widgets</button>
        <p><pre id="invalidWidgetsList"></pre></p>
	</body>
</html>

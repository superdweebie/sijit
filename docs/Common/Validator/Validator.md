Validator
================

This is a group of modules which provide a standardised validation interface.

#BaseValidator

All validators should inherit from this module.

Validators should override the `isValid(value)` function. This function should
return a boolean value indicating if the value argument is valid. Validators may
also return a Deferred object which will resolve to a boolean.

Validators should also populate the `messages` property array. This must be an
array of strings indicating why a validation failed. The messages can
be retrieved with the `get` method.

For example, this validator checks that the `value` argument contains only alpha
characters:

    define([
        'dojo/_base/declare',
        'Sds/Validator/BaseValidator'
    ],
    function(
        declare,
        BaseValidator
    ){
        return declare(
            'Sds/Validator/AlphaValidator',
            [BaseValidator],
            {
                regEx: /^[a-zA-Z]+$/,

                isValid: function(value){
                    this.messages = [];

                    var result = true;

                    if ( ! this.regEx.test(value)){
                        result = false;
                        this.messages.push('Must contain only the characters a-z, or A-Z.');
                    }

                    return result;
                }
            }
        );
    });

This example validator could be used like this:

    require([Sds/Validator/AlphaValidator], function(AlphaValidator){
        var validator = new AlphaValidator;
        if ( ! validator.isValid('asdf')){
            console.dir(validator.get('messages')
        }
    }

The BaseValidator also defines four extra properties for each validator:
    haltOnPass
    haltOnFail
    skipOnPass
    skipOnFail

These properties are used by `ValidatorGroup` instances, and are discussed below.

#ValidatorGroup

A ValidatorGroup is a series of validators evaluated in order. If any return `false`, then
the ValidatorGroup will return `false`. Any messages generated by the validators are
collected by the ValidatorGroup. If any of the validators return a Deferred, then the ValidatorGroup
will return a Deferred. The Deferred with will resolve

For example, the PersonalNameValidator is actually a ValidatorGroup which checks both the
LengthValidator and the AlphaValidator:

    define([
        'dojo/_base/declare',
        'Sds/Validator/ValidatorGroup',
        'Sds/Validator/LengthValidator',
        'Sds/Validator/AlphaValidator'
    ],
    function(
        declare,
        ValidatorGroup,
        LengthValidator,
        AlphaValidator
    ){
        return declare(
            'Sds/Validator/PersonalNameValidator',
            [ValidatorGroup],
            {
                constructor: function(){
                    this.validators = [
                        new LengthValidator(1, 50),
                        new AlphaValidator()
                    ]
                }
            }
        );
    });

The PersonalNameValidator is then used the same as a normal validator:

    require([Sds/Validator/PersonalNameValidator], function(PersonalNameValidator){
        var validator = new PersonalNameValidator;
        if ( ! validator.isValid('Tim')){
            console.dir(validator.get('messages')
        }
    }

ValidatorGroups may be nested.

##haltOnPass

If a validator inside a ValidatorGroup passes, and that validator also has it's `haltOnPass` property
evaluate to true, then the ValidatorGroup will immediately return without checking any subsiquent
validators in the group. (`haltOnPass` is usedby the `NotRequiredValidator`).

##haltOnFail

If a validator inside a ValidatorGroup fails, and that validator also has it's `haltOnFail` property
evaluate to true, then the ValidatorGroup will immediately return without checking any subsiquent
validators in the group. (`haltOnFail` is usedby the `RequiredValidator`).

##skipOnPass

If all validators inside a ValidatorGroup pass, and that validator also has it's skiptOnPass` property
evaluate to true, then the ValidatorGroup will skip that validator, and move on to the next.

##skipOnFail

If one validators inside a ValidatorGroup has failed, and that validator also has it's skiptOnFail` property
evaluate to true, then the ValidatorGroup will skip that validator, and move on to the next.

#validatorFactory

This module may be used to create instances of a Validator or ValidatorGroup. It has two methods `create` and `createGroup`.

#create

Creates an instance of a validator

Create may be called in one of two different ways.

Create may be called with a string giving the moduleName, and an options object which will be mixed
into the validator instance. eg:

    create('Sds/Validator/LengthValidator, {min: 10, max:20})

This will return a Deferred, which will resolve to an instnace of Sds/Validator/LengthValidator with the
min and max options set.


Alternately, create may be called with a single object with both `class` and `options` keys:

     create({'class': 'Sds/Validator/LengthValidator', options: {min:10, max: 20}})

#createGroup

Pass this method an array of validators, and get a ValidatorGroup returned.

The validators array may be Validator instances, or a form compatibile with the factory
`create` method. eg:

    createGroup([
        'Sds/Validator/AlphaValidator',
        {
            'class': 'Sds/Validator/LengthValidator',
            options: {min: 10, max: 120}
        }
    ])

CreateGroup will return a promise, which will resolve to the ValidatorGroup
instance.

#Validator Library

The following validators are shipped with sijit:

##AlphaValidator

Will validate that a string contains alpha characters only.

##DatatypeValidator

Will validate that a field is the correct datatype. (This validator is not complete yet)

##EmailAddressValidator

Will validate a valid email address

##IdentifierValidator

Will validate that a string can be used as a name or identifier.

##IdentifierCharsValidator

Will validate that a string contains only alphanumeric charcters, and - _ characters.

##IdentifierArrayValidator

Will validate that an array contains only valid identifiers.

##LengthValidator

Validates the length of a string.

##NotRequiredValidator

Validates that a value is not required. This is used to halt other validators in a
ValidatorGroup if the value is empty.

##PasswordValidator

Checks that a string is a mildly strong password.

##PersonalNameValidator

Checks that a string is a valid personal name.

##RequiredValidator

Validates that a value is required. This is used to halt other validators in a
ValidatorGroup if the value is empty.
